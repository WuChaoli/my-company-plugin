---
name: context-engineering
description: ä½¿ç”¨ä¸Šä¸‹æ–‡å·¥ç¨‹ç³»ç»Ÿç®¡ç†å¼€å‘ä¸Šä¸‹æ–‡ã€‚å½“å¤„ç†é¡¹ç›®æ–‡æ¡£ã€å¼€å§‹æ–°åŠŸèƒ½ã€ç»„ç»‡å¼€å‘å·¥ä½œã€å½’æ¡£å·²å®Œæˆå·¥ä½œï¼Œæˆ–ç”¨æˆ·æåˆ°"context management"ã€"å¼€å§‹æ–°éœ€æ±‚"ã€"å½’æ¡£ä¸Šä¸‹æ–‡"ã€"æŸ¥çœ‹æ´»è·ƒä¸Šä¸‹æ–‡"ï¼Œæˆ–éœ€è¦æŒ‰åŠŸèƒ½å’Œæ—¶é—´ç»„ç»‡å¼€å‘æ–‡æ¡£æ—¶ä½¿ç”¨ã€‚æä¾›åˆå§‹åŒ–ä¸Šä¸‹æ–‡ã€è·Ÿè¸ªæ´»è·ƒå·¥ä½œå’Œå½’æ¡£å·²å®ŒæˆåŠŸèƒ½çš„ç»“æ„åŒ–å·¥ä½œæµã€‚
---

# ä¸Šä¸‹æ–‡å·¥ç¨‹ (Context Engineering)

ä½¿ç”¨ç»“æ„åŒ–æ–‡æ¡£ç³»ç»Ÿç®¡ç†å¼€å‘ä¸Šä¸‹æ–‡ï¼ŒæŒ‰æ—¶é—´å’ŒåŠŸèƒ½ç»„ç»‡å·¥ä½œï¼Œæ”¯æŒå¹¶è¡Œå¼€å‘ï¼Œå¹¶åœ¨é™æ€æ–‡æ¡£å’ŒåŠ¨æ€æ–‡æ¡£ä¹‹é—´ä¿æŒæ¸…æ™°çš„åˆ†ç¦»ã€‚

## æ ¸å¿ƒèƒ½åŠ›

1. **åˆå§‹åŒ–æ–°ä¸Šä¸‹æ–‡** - åˆ›å»ºåŒ…å«å…ƒæ•°æ®å’Œåˆå§‹æ–‡æ¡£çš„ç»“æ„åŒ–ç›®å½•
2. **åˆ—å‡ºæ´»è·ƒä¸Šä¸‹æ–‡** - æŸ¥çœ‹æ‰€æœ‰æ­£åœ¨è¿›è¡Œçš„å¼€å‘å·¥ä½œ
3. **å½’æ¡£å·²å®Œæˆä¸Šä¸‹æ–‡** - æ ‡è®°å·¥ä½œä¸ºå·²å®Œæˆå¹¶ç”Ÿæˆæ‘˜è¦
4. **ç»´æŠ¤æ–‡æ¡£ç»“æ„** - ç¡®ä¿ç¬¦åˆé¡¹ç›®æ ‡å‡†

## ä½•æ—¶ä½¿ç”¨æ­¤æŠ€èƒ½

åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ä½¿ç”¨æ­¤æŠ€èƒ½ï¼š
- å¼€å§‹æ–°åŠŸèƒ½æˆ–éœ€æ±‚
- éœ€è¦æŸ¥çœ‹å½“å‰æ´»è·ƒçš„å¼€å‘å·¥ä½œ
- å®ŒæˆåŠŸèƒ½å¹¶æƒ³è¦å½’æ¡£ä¸Šä¸‹æ–‡
- å¤„ç†éµå¾ªä¸Šä¸‹æ–‡å·¥ç¨‹æ¨¡å¼çš„é¡¹ç›®æ–‡æ¡£
- ç”¨æˆ·è¯´"å¼€å§‹æ–°éœ€æ±‚"ã€"æŸ¥çœ‹æ´»è·ƒä¸Šä¸‹æ–‡"ã€"å½’æ¡£ä¸Šä¸‹æ–‡"æˆ–æåˆ°ä¸Šä¸‹æ–‡ç®¡ç†

## å·¥ä½œæµå†³ç­–æ ‘

```
ç”¨æˆ·è¯·æ±‚
    â”‚
    â”œâ”€ "å¼€å§‹æ–°åŠŸèƒ½" / "å¼€å§‹æ–°éœ€æ±‚"
    â”‚   â””â”€> åˆå§‹åŒ–æ–°ä¸Šä¸‹æ–‡
    â”‚
    â”œâ”€ "æˆ‘ä»¬åœ¨åšä»€ä¹ˆï¼Ÿ" / "æŸ¥çœ‹æ´»è·ƒä¸Šä¸‹æ–‡"
    â”‚   â””â”€> åˆ—å‡ºæ´»è·ƒä¸Šä¸‹æ–‡
    â”‚
    â”œâ”€ "åŠŸèƒ½å®Œæˆäº†" / "å½’æ¡£ä¸Šä¸‹æ–‡"
    â”‚   â””â”€> å½’æ¡£ä¸Šä¸‹æ–‡
    â”‚
    â””â”€ "éœ€è¦ç†è§£ç³»ç»Ÿ"
        â””â”€> é˜…è¯»è§„èŒƒæ–‡æ¡£
```

## åˆå§‹åŒ–æ–°ä¸Šä¸‹æ–‡

åˆ›å»ºä¸€ä¸ªåŒ…å«å®Œæ•´ç›®å½•ç»“æ„ã€å…ƒæ•°æ®å’Œåˆå§‹æ–‡æ¡£çš„æ–°å¼€å‘ä¸Šä¸‹æ–‡ã€‚

### ä½¿ç”¨è„šæœ¬

```bash
python scripts/init_context.py <feature-name> [--assignee <name>] [--branch <branch-name>]
```

**ç¤ºä¾‹ï¼š**
```bash
python scripts/init_context.py user-authentication --assignee developer --branch feature/user-auth
```

### åˆ›å»ºçš„å†…å®¹

è„šæœ¬ä¼šåˆ›å»ºï¼š
1. **ä¸Šä¸‹æ–‡ç›®å½•**ï¼š`docs/contexts/YYYY-MM-DD_feature-name/`
2. **å…ƒæ•°æ®æ–‡ä»¶**ï¼š`.context.json`ï¼ŒåŒ…å«çŠ¶æ€ã€æ—¶é—´æˆ³ã€è´Ÿè´£äººç­‰
3. **åˆå§‹æ–‡æ¡£**ï¼š
   - `requirements.md` - éœ€æ±‚æ–‡æ¡£
   - `architecture-changes.md` - æ¶æ„å˜æ›´
   - `feature-spec.md` - åŠŸèƒ½è§„æ ¼
   - `plan.md` - å®æ–½è®¡åˆ’
   - `test-plan.md` - æµ‹è¯•è®¡åˆ’
   - `todos.md` - ä»»åŠ¡æ¸…å•ï¼ˆå¯é€‰ï¼‰
4. **ç´¢å¼•æ›´æ–°**ï¼šå°†ä¸Šä¸‹æ–‡æ·»åŠ åˆ° `.contexts-index.json`

### ä¸Šä¸‹æ–‡ ID æ ¼å¼

ä¸Šä¸‹æ–‡ ID éµå¾ªæ¨¡å¼ï¼š`YYYY-MM-DD_feature-name`
- æ—¥æœŸï¼šYYYY-MM-DD æ ¼å¼çš„å½“å‰æ—¥æœŸ
- åŠŸèƒ½åç§°ï¼šå°å†™è‹±æ–‡ï¼Œä½¿ç”¨è¿å­—ç¬¦
- ç¤ºä¾‹ï¼š`2026-02-01_user-authentication`

### åˆå§‹åŒ–åçš„ä¸‹ä¸€æ­¥

1. ç¼–è¾‘ `requirements.md` å¡«å†™éœ€æ±‚è¯¦æƒ…
2. æ›´æ–° `plan.md` åˆ›å»ºå®æ–½è®¡åˆ’
3. å¼€å§‹å¼€å‘
4. éšç€å·¥ä½œè¿›å±•æ›´æ–°æ–‡æ¡£
5. ä¿®æ”¹é™æ€æ–‡æ¡£æ—¶æ›´æ–° `.context.json` å…ƒæ•°æ®

## åˆ—å‡ºæ´»è·ƒä¸Šä¸‹æ–‡

æŸ¥çœ‹æ‰€æœ‰å½“å‰æ´»è·ƒçš„å¼€å‘ä¸Šä¸‹æ–‡ã€‚

### ä½¿ç”¨è„šæœ¬

```bash
# ä»…åˆ—å‡ºæ´»è·ƒä¸Šä¸‹æ–‡
python scripts/list_contexts.py

# åˆ—å‡ºæ´»è·ƒå’Œå·²å½’æ¡£çš„ä¸Šä¸‹æ–‡
python scripts/list_contexts.py --all
```

### è¾“å‡ºæ ¼å¼

```
ğŸ“‹ æ´»è·ƒä¸Šä¸‹æ–‡åˆ—è¡¨ï¼š

Context ID                          æ ‡é¢˜                 è´Ÿè´£äºº            çŠ¶æ€          æœ€åæ›´æ–°
--------------------------------------------------------------------------------------------------------------
2026-02-01_user-authentication     ç”¨æˆ·è®¤è¯åŠŸèƒ½          developer        in_progress   2026-02-01 15:30
2026-01-30_api-refactor            APIé‡æ„              developer        in_progress   2026-01-30 10:00

å…± 2 ä¸ªæ´»è·ƒä¸Šä¸‹æ–‡
```

### æŸ¥æ‰¾ä¸Šä¸‹æ–‡è¯¦æƒ…

åˆ—å‡ºä¸Šä¸‹æ–‡åï¼Œè¯»å–ç‰¹å®šä¸Šä¸‹æ–‡çš„ `.context.json` è·å–å®Œæ•´è¯¦æƒ…ï¼š
```bash
# è¯»å–å…ƒæ•°æ®
cat docs/contexts/2026-02-01_user-authentication/.context.json

# è¯»å–ç‰¹å®šæ–‡æ¡£
cat docs/contexts/2026-02-01_user-authentication/requirements.md
```

## å½’æ¡£ä¸Šä¸‹æ–‡

å°†ä¸Šä¸‹æ–‡æ ‡è®°ä¸ºå·²å®Œæˆå¹¶ç”Ÿæˆå½’æ¡£æ‘˜è¦ã€‚

### ä½¿ç”¨è„šæœ¬

```bash
python scripts/archive_context.py <context-id>
```

**ç¤ºä¾‹ï¼š**
```bash
python scripts/archive_context.py 2026-02-01_user-authentication
```

### æ‰§è¡Œæ“ä½œ

è„šæœ¬ä¼šï¼š
1. **æ›´æ–°å…ƒæ•°æ®**ï¼šè®¾ç½® `status: "completed"` å’Œ `completedAt` æ—¶é—´æˆ³
2. **ç”Ÿæˆ SUMMARY.md**ï¼šåˆ›å»ºå½’æ¡£æ‘˜è¦ï¼ŒåŒ…å«ï¼š
   - åŸºæœ¬ä¿¡æ¯ï¼ˆæ—¥æœŸã€è´Ÿè´£äººã€åˆ†æ”¯ï¼‰
   - å®ŒæˆçŠ¶æ€ï¼ˆå·²å®ç°åŠŸèƒ½ã€æŠ€æœ¯æ ˆï¼‰
   - å…³é”®å†³ç­–
   - é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
   - æµ‹è¯•ç»“æœ
   - æ›´æ–°çš„é™æ€æ–‡æ¡£
   - åç»­å·¥ä½œ
   - ç»éªŒæ€»ç»“
3. **æ›´æ–°ç´¢å¼•**ï¼šå°†ä¸Šä¸‹æ–‡ä» `activeContexts` ç§»è‡³ `archivedContexts`

### å½’æ¡£å

ä¸Šä¸‹æ–‡ä¿ç•™åœ¨ `docs/contexts/[contextId]/` ä¸­ï¼Œä½†çŠ¶æ€å˜ä¸º `status: "completed"`ã€‚æ–‡ä»¶ä¸ä¼šç§»åŠ¨ï¼Œåªæœ‰çŠ¶æ€æ”¹å˜ã€‚

## æ–‡æ¡£ç»“æ„

### é™æ€æ–‡æ¡£ (`docs/static/`)

æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡çš„é•¿æœŸç»´æŠ¤æ–‡æ¡£ï¼š
- `architecture/` - ç³»ç»Ÿæ¶æ„ã€ç»„ä»¶è®¾è®¡ã€ADR
- `user-journey/` - ç”¨æˆ·æ—…ç¨‹å’Œäº¤äº’æµç¨‹
- `data-flow/` - æ•°æ®æµå’Œå¤„ç†é€»è¾‘
- `api/` - API æ¥å£æ–‡æ¡£

### åŠ¨æ€æ–‡æ¡£ (`docs/contexts/[contextId]/`)

æŒ‰æ—¶é—´ + åŠŸèƒ½ç»„ç»‡çš„ç‰¹å®šåŠŸèƒ½æ–‡æ¡£ï¼š
- `requirements.md` - éœ€æ±‚æ–‡æ¡£
- `architecture-changes.md` - æ­¤åŠŸèƒ½çš„æ¶æ„å˜æ›´
- `feature-spec.md` - åŠŸèƒ½è§„æ ¼
- `plan.md` - å®æ–½è®¡åˆ’
- `todos.md` - ä»»åŠ¡æ¸…å•
- `test-plan.md` - æµ‹è¯•è®¡åˆ’
- `SUMMARY.md` - å½’æ¡£æ‘˜è¦ï¼ˆå½’æ¡£æ—¶ç”Ÿæˆï¼‰

### å…ƒæ•°æ®æ–‡ä»¶

**`.context.json`** - ä¸Šä¸‹æ–‡å…ƒæ•°æ®ï¼š
```json
{
  "contextId": "2026-02-01_user-authentication",
  "status": "in_progress",
  "createdAt": "2026-02-01T10:00:00Z",
  "updatedAt": "2026-02-01T15:30:00Z",
  "completedAt": null,
  "title": "ç”¨æˆ·è®¤è¯åŠŸèƒ½",
  "description": "å®ç°åŸºäº JWT çš„ç”¨æˆ·è®¤è¯ç³»ç»Ÿ",
  "assignee": "developer-name",
  "gitBranch": "feature/user-auth",
  "documents": {
    "requirements": "requirements.md",
    "architectureChanges": "architecture-changes.md",
    "featureSpec": "feature-spec.md",
    "plan": "plan.md",
    "todos": "todos.md",
    "testPlan": "test-plan.md"
  },
  "staticDocsUpdated": []
}
```

**`.contexts-index.json`** - å…¨å±€ç´¢å¼•ï¼š
```json
{
  "activeContexts": [
    {
      "contextId": "2026-02-01_user-authentication",
      "title": "ç”¨æˆ·è®¤è¯åŠŸèƒ½",
      "status": "in_progress",
      "assignee": "developer-name",
      "updatedAt": "2026-02-01T15:30:00Z"
    }
  ],
  "archivedContexts": []
}
```

## æœ€ä½³å®è·µ

1. **å§‹ç»ˆæ£€æŸ¥å½“å‰ä¸Šä¸‹æ–‡** - å¼€å§‹å·¥ä½œå‰è¯»å– `.contexts-index.json`
2. **åŠæ—¶æ›´æ–°å…ƒæ•°æ®** - ä¿®æ”¹æ–‡æ¡£åæ›´æ–° `updatedAt`
3. **è®°å½•é™æ€æ–‡æ¡£å˜æ›´** - æ›´æ–°é™æ€æ–‡æ¡£æ—¶æ·»åŠ åˆ° `staticDocsUpdated` æ•°ç»„
4. **ä¿æŒæ–‡æ¡£åŒæ­¥** - æ¶æ„å˜æ›´æ—¶åŒæ—¶æ›´æ–°åŠ¨æ€å’Œé™æ€æ–‡æ¡£
5. **å®Œæ•´å½’æ¡£** - ç¡®ä¿ SUMMARY.md å…¨é¢å‡†ç¡®
6. **æå–ç»éªŒ** - å°†å…³é”®ç»éªŒæ·»åŠ åˆ°é¡¹ç›®çº§ CLAUDE.md

## ä½¿ç”¨ä¸Šä¸‹æ–‡å·¥ä½œ

### å¼€å§‹åŠŸèƒ½å¼€å‘

1. åˆ—å‡ºæ´»è·ƒä¸Šä¸‹æ–‡æŸ¥çœ‹è¿›è¡Œä¸­çš„å·¥ä½œ
2. å¦‚æœå¼€å§‹æ–°å·¥ä½œï¼Œåˆå§‹åŒ–æ–°ä¸Šä¸‹æ–‡
3. ç¼–è¾‘åˆå§‹æ–‡æ¡£å¡«å†™è¯¦æƒ…
4. å¼€å§‹å¼€å‘

### å¼€å‘è¿‡ç¨‹ä¸­

1. éšç€å·¥ä½œè¿›å±•æ›´æ–°ä¸Šä¸‹æ–‡æ–‡æ¡£
2. æ›´æ–°é™æ€æ–‡æ¡£æ—¶ï¼Œè®°å½•åœ¨ `.context.json` çš„ `staticDocsUpdated` ä¸­
3. æ›´æ–°å…ƒæ•°æ®ä¸­çš„ `updatedAt` æ—¶é—´æˆ³
4. ä¿æŒ `plan.md` å’Œ `todos.md` æœ€æ–°

### å®Œæˆå·¥ä½œ

1. ç¡®ä¿æ‰€æœ‰æ–‡æ¡£éƒ½æ˜¯æœ€æ–°çš„
2. éªŒè¯é™æ€æ–‡æ¡£å·²æ›´æ–°
3. è¿è¡Œæµ‹è¯•å¹¶æ›´æ–° `test-plan.md`
4. å½’æ¡£ä¸Šä¸‹æ–‡
5. å®¡æŸ¥ç”Ÿæˆçš„ SUMMARY.md å¹¶æ ¹æ®éœ€è¦å¢å¼º

## å¹¶è¡Œå¼€å‘

ä¸Šä¸‹æ–‡å·¥ç¨‹ç³»ç»Ÿæ”¯æŒå¤šä¸ªå¼€å‘è€…åŒæ—¶å¤„ç†ä¸åŒåŠŸèƒ½ï¼š

- æ¯ä¸ªåŠŸèƒ½éƒ½æœ‰è‡ªå·±çš„ä¸Šä¸‹æ–‡ç›®å½•
- ä¸Šä¸‹æ–‡æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¼šç›¸äº’å¹²æ‰°
- ç´¢å¼•æ–‡ä»¶è·Ÿè¸ªæ‰€æœ‰æ´»è·ƒå’Œå·²å½’æ¡£çš„ä¸Šä¸‹æ–‡
- çŠ¶æ€å­—æ®µåŒºåˆ†æ´»è·ƒå’Œå·²å®Œæˆçš„å·¥ä½œ

## å‚è€ƒèµ„æ–™

å®Œæ•´è§„èŒƒå’Œæ¨¡æ¿åŒ…å«åœ¨æ­¤ skill ä¸­ï¼š
- **è§„èŒƒæ–‡æ¡£**ï¼š[references/specification.md](references/specification.md) - å®Œæ•´çš„ä¸Šä¸‹æ–‡å·¥ç¨‹ç³»ç»Ÿè§„èŒƒ
- **æ¨¡æ¿æ–‡æ¡£**ï¼š[references/templates.md](references/templates.md) - æ‰€æœ‰æ–‡æ¡£çš„æ¨¡æ¿æ ¼å¼

è¿™äº›å‚è€ƒæ–‡æ¡£æ˜¯ skill è‡ªå¸¦çš„ï¼Œä¸ä¾èµ–é¡¹ç›®ä¸­çš„ä»»ä½•æ–‡ä»¶ã€‚

## æ•…éšœæ’é™¤

### ä¸Šä¸‹æ–‡å·²å­˜åœ¨
å¦‚æœå°è¯•åˆ›å»ºå·²å­˜åœ¨çš„ä¸Šä¸‹æ–‡ï¼Œè„šæœ¬ä¼šæŠ¥é”™ã€‚å¯ä»¥ï¼š
- ä½¿ç”¨ä¸åŒçš„åŠŸèƒ½åç§°
- æˆ–ä½¿ç”¨ç°æœ‰ä¸Šä¸‹æ–‡

### ç´¢å¼•æ–‡ä»¶ç¼ºå¤±
å¦‚æœ `.contexts-index.json` ä¸å­˜åœ¨ï¼Œåˆå§‹åŒ–ç¬¬ä¸€ä¸ªä¸Šä¸‹æ–‡æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºã€‚

### å…ƒæ•°æ®æŸå
å¦‚æœå…ƒæ•°æ®æ–‡ä»¶æŸåï¼ŒæŒ‰ç…§ä¸Šé¢æ˜¾ç¤ºçš„æ ¼å¼æ‰‹åŠ¨é‡æ–°åˆ›å»ºã€‚

## è„šæœ¬å‚è€ƒ

æ‰€æœ‰è„šæœ¬ä½äº `scripts/` ç›®å½•ï¼š

- **init_context.py** - åˆå§‹åŒ–æ–°å¼€å‘ä¸Šä¸‹æ–‡
- **list_contexts.py** - åˆ—å‡ºæ´»è·ƒï¼ˆå’Œå·²å½’æ¡£ï¼‰ä¸Šä¸‹æ–‡
- **archive_context.py** - å½’æ¡£å·²å®Œæˆä¸Šä¸‹æ–‡

æ‰€æœ‰è„šæœ¬éƒ½å¯ä»¥ä»é¡¹ç›®å†…çš„ä»»ä½•ç›®å½•è¿è¡Œ - å®ƒä»¬ä¼šé€šè¿‡æŸ¥æ‰¾ `docs/contexts/` è‡ªåŠ¨æ‰¾åˆ°é¡¹ç›®æ ¹ç›®å½•ã€‚
